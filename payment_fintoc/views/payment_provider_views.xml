<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="payment_provider_form" model="ir.ui.view">
        <field name="name">Fintoc Provider Form</field>
        <field name="model">payment.provider</field>
        <field name="inherit_id" ref="payment.payment_provider_form"/>
        <field name="arch" type="xml">
            <group name="provider_credentials" position="inside">
                <group name="fintoc_credentials" invisible="code != 'fintoc'">
                    <field name="fintoc_secret_key"
                           password="True"
                           required="code == 'fintoc' and state != 'disabled'"/>
                    <field name="fintoc_webhook_secret"
                           password="True"
                           required="code == 'fintoc' and state != 'disabled'"/>
                    <field name="fintoc_webhook_endpoint_url"
                           placeholder="https://your-domain.com/payment/fintoc/webhook"
                           required="code == 'fintoc' and state != 'disabled'"/>
                    <field name="fintoc_api_base_url"
                           placeholder="https://api.fintoc.com"/>
                    <field name="fintoc_webhook_endpoint_id" readonly="1"/>
                    <field name="fintoc_webhook_last_sync" readonly="1"/>
                    <field name="fintoc_webhook_tolerance"/>

                    <button name="action_fintoc_register_or_update_webhook"
                            type="object"
                            class="btn btn-secondary"
                            string="Register/Update Webhook in Fintoc"/>

                    <div class="alert alert-warning"
                         role="alert"
                         invisible="not fintoc_configuration_warning">
                        <field name="fintoc_configuration_warning" nolabel="1" readonly="1"/>
                    </div>
                </group>
            </group>

            <group name="provider_config" position="inside">
                <group string="Fintoc Payment Setup"
                       name="fintoc_payment_setup"
                       invisible="code != 'fintoc'">
                    <field name="fintoc_collection_mode"/>
                    <field name="fintoc_enable_bank_transfer"/>
                    <field name="fintoc_enable_card"/>
                    <label string="If both methods are enabled, Fintoc can display all available options when no explicit choice is made."/>
                </group>

                <group string="Recipient Account (Direct Mode)"
                       name="fintoc_direct_recipient"
                       invisible="code != 'fintoc' or fintoc_collection_mode != 'direct' or not fintoc_enable_bank_transfer">
                    <field name="fintoc_recipient_holder_id"
                           required="code == 'fintoc' and state != 'disabled' and fintoc_collection_mode == 'direct' and fintoc_enable_bank_transfer"/>
                    <field name="fintoc_recipient_number"
                           required="code == 'fintoc' and state != 'disabled' and fintoc_collection_mode == 'direct' and fintoc_enable_bank_transfer"/>
                    <field name="fintoc_recipient_type"
                           required="code == 'fintoc' and state != 'disabled' and fintoc_collection_mode == 'direct' and fintoc_enable_bank_transfer"/>
                    <field name="fintoc_recipient_institution_id"
                           required="code == 'fintoc' and state != 'disabled' and fintoc_collection_mode == 'direct' and fintoc_enable_bank_transfer"/>
                </group>
            </group>
        </field>
    </record>

</odoo>
